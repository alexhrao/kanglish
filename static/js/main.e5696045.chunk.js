(this.webpackJsonpkanglish=this.webpackJsonpkanglish||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),c=(n(14),n(1)),s=n.n(c),u=n(2),l=n(3),h=n(5),f=n(4),d=n(6),m=(n(16),function(e){var t=e.text,n=e.onChange,a=e.onKannadize;return r.a.createElement("div",{className:"english-input"},r.a.createElement("input",{type:"text",value:t,placeholder:"English...",onChange:function(e){return n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&a()}}),r.a.createElement("button",{type:"button",className:t.length>0?"is-ready":"",onClick:function(){return a()}},"Kannadize It!"))}),g=(n(17),function(e){var t=e.kantext,n=e.onClick;return r.a.createElement("div",{className:"kannada-output"},0===t.length?r.a.createElement("p",null,r.a.createElement("em",null,"Hit Translate!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,t),r.a.createElement("button",{type:"button",onClick:n},"STAR")))}),p="https://9iepa55a3m.execute-api.us-east-1.amazonaws.com/Prod";function v(){var e=(document.cookie+";").match(new RegExp("token=.*;"));if(null!==e)return e[0].split(/=|;/)[1]}function E(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(p,"/favorites"),{method:"GET",headers:{Authorization:"Bearer ".concat(v())}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}))}n(18);var b=function(e){var t=e.favorite,n=e.onDelete;return r.a.createElement("tr",{className:"fav-record"},r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"delete-record",onClick:function(){return n(t.english)}},"\xd7")),r.a.createElement("td",null,r.a.createElement("p",{className:"fav-english"},t.english)),r.a.createElement("td",null,r.a.createElement("p",{className:"fav-kannada"},t.kannada)))},k=(n(19),n(20),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={pass:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSubmit,a=t.isAngry,o=this.state.pass;return r.a.createElement("div",{className:"login-dialog ".concat(a?"is-angry":"")},r.a.createElement("h2",null,a?r.a.createElement("em",null,"Please give the *right* password!"):"Welcome! Please login below"),r.a.createElement("div",{className:"login-controls"},r.a.createElement("input",{type:"password",placeholder:"Enter your Password...",value:o,onChange:function(t){return e.setState({pass:t.target.value})},onKeyPress:function(e){"Enter"===e.key&&n(o)}}),r.a.createElement("button",{type:"button",className:o.length>0?"is-ready":"",onClick:function(){return n(o)}},"Log In")))}}]),t}(r.a.Component)),y=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).onInputChange=function(e){n.setState({text:e})},n.onLogin=function(e){n.setState({initialLoading:!0}),function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(p,"/authenticate"),{method:"POST",body:JSON.stringify({pass:e})}).then((function(e){return e.json()})).then((function(e){if(void 0!==e.token)return document.cookie="token=".concat(e.token),e.token})).catch((function(){})));case 1:case"end":return t.stop()}}))}(e).then((function(e){if(void 0!==e)return E().then((function(e){return n.setState({favorites:e})})).then((function(){return n.setState({initialLoading:!1,isLoggedIn:!0})}));n.setState({initialLoading:!1,isLoggedIn:!1,badPassword:!0})}))},n.onDelete=function(e){var t,a=n.state.favorites,r=a.findIndex((function(t){return t.english===e}));-1!==r&&(n.setState({favoriteLoading:!0}),(t=a[r],s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(p,"/favorites"),{method:"DELETE",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(v())}}));case 1:case"end":return e.stop()}}))).then((function(){a.splice(r,1),n.setState({favorites:a})})).then((function(){return n.setState({favoriteLoading:!1})})))},n.onCreate=function(){var e=n.state,t=e.favorites,a=e.text,r=e.kantext;n.setState({favoriteLoading:!0});var o={english:a,kannada:r,rank:t.length};(function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("".concat(p,"/favorites"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(v())}}));case 1:case"end":return t.stop()}}))})(o).then((function(){t.push(o),n.setState({favorites:t})})).then((function(){return n.setState({favoriteLoading:!1})}))},n.state={text:"",kantext:"",favorites:[],initialLoading:!0,favoriteLoading:!1,translationLoading:!1,isLoggedIn:!1,badPassword:!1},s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(p,"/authenticate"),{method:"GET",headers:{Authorization:"Bearer ".concat(v())}}).then((function(e){return e.json()})).then((function(e){return e.isValid})).catch((function(){})));case 1:case"end":return e.stop()}})).then((function(e){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return n.setState({initialLoading:!1,isLoggedIn:!1}),t.abrupt("return");case 5:return n.setState({isLoggedIn:!0}),t.abrupt("return",E().then((function(e){return n.setState({favorites:e})})).then((function(){return n.setState({initialLoading:!1})})));case 7:case"end":return t.stop()}}))})),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.text,a=t.kantext,o=t.initialLoading,i=t.favorites,c=t.isLoggedIn,u=t.badPassword;if(o)return r.a.createElement("p",null,"Loading...");if(!c)return r.a.createElement(k,{onSubmit:this.onLogin,isAngry:u});var l=i.map((function(t){return r.a.createElement(b,{key:t.english,favorite:t,onDelete:e.onDelete})}));return r.a.createElement("div",{className:"kanglish"},r.a.createElement("h1",null,"Welcome to Kanglish!"),r.a.createElement("h2",null,r.a.createElement("em",null,"Favorites")),r.a.createElement("table",{className:"fav-translations"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"English"),r.a.createElement("th",null,"Kannada"))),r.a.createElement("tbody",null,l)),r.a.createElement("div",{className:"translator"},r.a.createElement("h2",null,r.a.createElement("em",null,"Translate")),r.a.createElement(m,{text:n,onChange:this.onInputChange,onKannadize:function(){var t;(t=n,s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(t.toLocaleUpperCase()));case 1:case"end":return e.stop()}}))).then((function(t){return e.setState({kantext:t})}))}}),r.a.createElement(g,{kantext:a,onClick:this.onCreate})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.e5696045.chunk.js.map